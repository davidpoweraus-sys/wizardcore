# ============================================
# WIZARDCORE ENVIRONMENT CONFIGURATION
# Complete configuration for Docker Compose deployment
# Copy this to .env and fill in your values
# ============================================

# ============================================
# DOMAIN CONFIGURATION
# ============================================
DOMAIN=offensivewizard.com
FRONTEND_DOMAIN=app.offensivewizard.com
BACKEND_DOMAIN=api.offensivewizard.com
AUTH_DOMAIN=auth.offensivewizard.com
JUDGE0_DOMAIN=judge0.offensivewizard.com

# ============================================
# FRONTEND CONFIGURATION (Next.js)
# ============================================
NEXT_PUBLIC_SUPABASE_URL=https://app.offensivewizard.com/api/auth
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzY2NzY1OTczLCJleHAiOjIwODIxMjU5NzN9.piJIh93w2-Pg6aBA0FfNLP7uUWNRANsAtw4wWX2sE3c
NEXT_PUBLIC_BACKEND_URL=https://api.offensivewizard.com
NEXT_PUBLIC_JUDGE0_API_URL=https://judge0.offensivewizard.com
NEXT_PUBLIC_SITE_URL=https://app.offensivewizard.com

# NextAuth Configuration (if still using)
NEXTAUTH_SECRET=qrFi3lfXfsuDoiTlTwzUhxyGdeN8UHgFAZojTVjIoHA8AJr4gi2hiTyWnYaTSOlDCzCTEzYzE9cE7URf3XQ
NEXTAUTH_URL=https://app.offensivewizard.com

# Internal URLs for Next.js API proxies (Docker network names)
# These are used by the proxy routes to connect to services
BACKEND_URL=http://backend:8080
JUDGE0_URL=http://judge0:2358
GOTRUE_URL=http://supabase-auth:9999
SUPABASE_INTERNAL_URL=http://supabase-auth:9999

# ============================================
# BACKEND CONFIGURATION
# ============================================
PORT=8080
ENVIRONMENT=production
LOG_LEVEL=info

# Backend Database and Redis URLs (complete connection strings)
DATABASE_URL=postgresql://wizardcore:YKiDQeXatsFIVvILstuZrxYBCPUdBlFC@postgres:5432/wizardcore?sslmode=disable
REDIS_URL=redis://:sd3DQHDAT98radrgLuVu4NbMbehZu7Kt@redis:6379

# Backend CORS
CORS_ALLOWED_ORIGINS=https://app.offensivewizard.com

# ============================================
# WIZARDCORE POSTGRES DATABASE
# ============================================
POSTGRES_USER=wizardcore
POSTGRES_PASSWORD=YKiDQeXatsFIVvILstuZrxYBCPUdBlFC
POSTGRES_DB=wizardcore

# ============================================
# WIZARDCORE REDIS
# ============================================
REDIS_PASSWORD=sd3DQHDAT98radrgLuVu4NbMbehZu7Kt

# ============================================
# SUPABASE AUTH / GOTRUE CONFIGURATION
# ============================================

# JWT Secret - used to sign all auth tokens (CRITICAL - must match!)
SUPABASE_JWT_SECRET=cd3e9a8225704a2b5d628a76409464bbbb7f08554ce9da8e6f350a16c7e809ccc1fec2db56c45f87abdfbfcf5b0526770a7bac12ef6e552eeebcb4f63a34501b
GOTRUE_JWT_SECRET=cd3e9a8225704a2b5d628a76409464bbbb7f08554ce9da8e6f350a16c7e809ccc1fec2db56c45f87abdfbfcf5b0526770a7bac12ef6e552eeebcb4f63a34501b

# Service Role Key - for server-side admin operations (KEEP SECRET!)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UiLCJpYXQiOjE3NjY3NjU5NzMsImV4cCI6MjA4MjEyNTk3M30.gD3CrtCYCojiSEJYdgEOXWgcrYMquRWf8V2yj5Jpym4

# GoTrue JWT Configuration
GOTRUE_JWT_EXP=3600
GOTRUE_JWT_AUD=authenticated
GOTRUE_JWT_ISSUER=supabase

# GoTrue URLs
GOTRUE_SITE_URL=https://app.offensivewizard.com
API_EXTERNAL_URL=https://app.offensivewizard.com/api/auth

# GoTrue CORS
GOTRUE_CORS_ALLOWED_ORIGINS=https://app.offensivewizard.com

# GoTrue Database Auto-migration
GOTRUE_DB_AUTOMIGRATE=true

# GoTrue API Configuration
GOTRUE_API_HOST=0.0.0.0
GOTRUE_API_PORT=9999

# GoTrue Database Driver
GOTRUE_DB_DRIVER=postgres

# GoTrue Database Connection (complete connection string)
GOTRUE_DB_DATABASE_URL=postgresql://supabase_auth_admin:0yvhLSetDKV4BlFOH6YeM5LCBe2jmV2B@supabase-postgres:5432/supabase_auth?sslmode=disable

# GoTrue Signup and Email Settings
GOTRUE_DISABLE_SIGNUP=false
GOTRUE_MAILER_AUTOCONFIRM=true

# ============================================
# SUPABASE POSTGRES DATABASE
# ============================================
SUPABASE_POSTGRES_USER=supabase_auth_admin
SUPABASE_POSTGRES_PASSWORD=0yvhLSetDKV4BlFOH6YeM5LCBe2jmV2B
SUPABASE_POSTGRES_DB=supabase_auth

# Alternative naming (for compatibility)
SUPABASE_DB_USER=supabase_auth_admin
SUPABASE_DB_PASSWORD=0yvhLSetDKV4BlFOH6YeM5LCBe2jmV2B
SUPABASE_DB_NAME=supabase_auth

# ============================================
# JUDGE0 CONFIGURATION
# ============================================

# Judge0 API Key (REQUIRED)
JUDGE0_API_KEY=MI+ObIjF9GfMucVCebTTW4A9BLKHZ6oQzdTOuFx7+q4=

# Judge0 API URL (internal)
JUDGE0_API_URL=http://judge0:2358

# Judge0 Postgres Database
JUDGE0_POSTGRES_USER=judge0
JUDGE0_POSTGRES_PASSWORD=IwT0fNqL2K5FWZRavG7pXmKGWcg98Sis
JUDGE0_POSTGRES_DB=judge0

# Judge0 Redis Password
JUDGE0_REDIS_PASSWORD=xgPsUZSzDJtaF5QhHSeu5YsNmvJ0efDK

# ============================================
# SSL CERTIFICATE CONFIGURATION
# ============================================
TRAEFIK_ACME_EMAIL=admin@offensivewizard.com

# ============================================
# OPTIONAL CONFIGURATION
# ============================================

# EMAIL CONFIGURATION (optional)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@offensivewizard.com

# DEBUG SETTINGS (optional)
# DEBUG=false
# LOG_LEVEL=info
# NODE_ENV=production

# ============================================
# IMPORTANT NOTES:
# ============================================
#
# 1. CRITICAL VARIABLES (must be set):
#    - GOTRUE_JWT_SECRET (must match SUPABASE_JWT_SECRET)
#    - DATABASE_URL (complete PostgreSQL connection string)
#    - REDIS_URL (complete Redis connection string)
#    - JUDGE0_API_KEY (API authentication key)
#
# 2. PROXY ROUTING:
#    Frontend requests go through Next.js API proxies to avoid CORS:
#
#    Auth Proxy:
#    - Browser calls: NEXT_PUBLIC_SUPABASE_URL (https://auth.offensivewizard.com)
#    - Server proxy uses: GOTRUE_URL (http://supabase-auth:9999)
#
#    Backend API Proxy:
#    - Browser calls: /api/backend/v1/*
#    - Server proxy uses: BACKEND_URL (http://backend:8080)
#
#    Judge0 Proxy:
#    - Browser calls: /api/judge0/*
#    - Server proxy uses: JUDGE0_URL (http://judge0:2358)
#
# 3. SECURITY:
#    - NEXT_PUBLIC_SUPABASE_ANON_KEY is safe to expose in frontend
#    - SUPABASE_SERVICE_ROLE_KEY must NEVER be exposed to frontend
#    - All passwords should be strong and unique
#
# 4. URLS:
#    - Internal services use Docker network names (postgres, redis, etc.)
#    - External/public URLs use full domain names with HTTPS
#
# 5. DNS RECORDS (must be configured):
#    All domains should point to your server IP:
#    - A record: app.offensivewizard.com → [YOUR_SERVER_IP]
#    - A record: api.offensivewizard.com → [YOUR_SERVER_IP]
#    - A record: auth.offensivewizard.com → [YOUR_SERVER_IP]
#    - A record: judge0.offensivewizard.com → [YOUR_SERVER_IP]
#
# 6. HTTPS:
#    All public URLs must use HTTPS in production
